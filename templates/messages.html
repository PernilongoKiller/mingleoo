{% extends "base.html" %}

{% block extra_styles %}
    .message-card {
        display: flex;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #eee;
        text-decoration: none;
        color: inherit;
    }
    .message-card:hover {
        background-color: #f9f9f9;
    }
    .message-card img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 15px;
    }
    .message-info {
        flex-grow: 1;
    }
    .message-info h3 {
        margin: 0 0 5px 0;
        color: #b82828;
        font-size: 1.2em;
    }
    .message-info p {
        margin: 0;
        color: #555;
        font-size: 0.9em;
    }
    .message-date {
        font-size: 0.8em;
        color: #999;
    }
{% endblock %}

{% block title %}Mensagens - Mingleoo.com{% endblock %}

{% block content %}
<div class="beta-warning">
    ðŸš§ Estamos em beta. Bugs podem acontecer!
</div>

<div class="container">
    <h1>Mensagens</h1>

    {% if conversations %}
        <div class="card">
            {% for conv in conversations %}
                <a href="{{ url_for('view_conversation', user_id=conv.user.id) }}" class="message-card">
                    <img src="{{ conv.user.avatar_url or url_for('static', filename='images/1.png') }}" alt="Avatar de {{ conv.user.name }}">
                    <div class="message-info">
                        <h3>{{ conv.user.name }}</h3>
                        <p>{{ conv.last_message.content[:50] }}...</p>
                    </div>
                    <span class="message-date">{{ conv.last_message.timestamp.strftime('%H:%M %d/%m') }}</span>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <p>VocÃª nÃ£o tem nenhuma conversa ainda.</p>
    {% endif %}

    <p><a href="{{ url_for('dashboard') }}" class="back-link">â¬… Voltar ao dashboard</a></p>
</div>
{% endblock %}
