<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Mingleoo.com - BETA</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/png" href="/static/images/1.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



</head>
<body>
<nav>
    <div class="nav-left">
        <img src="{{ url_for('static', filename='images/2.png') }}" alt="Logo" class="logo">
        <a href="{{ url_for('index') }}" class="site-link">mingleoo.com</a>
    </div>
    <div class="nav-right">
        {% if logged_in_user %}
            <a href="{{ url_for('list_conversations') }}">Mensagens ({% if unread_message_count > 0 %}<span style="color: yellow;">{{ unread_message_count }}</span>{% else %}0{% endif %})</a>
            <a href="{{ url_for('notifications') }}">Notifica√ß√µes ({% if notification_count > 0 %}<span style="color: yellow;">{{ notification_count }}</span>{% else %}0{% endif %})</a>
            <a href="{{ url_for('edit_profile') }}">Perfil</a>
        {% endif %}
    </div>
</nav>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class="flashes">
    {% for category, message in messages %}
      <li class="{{ category }}">{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<h1>Editar Perfil</h1>

<form action="/profile" method="POST">

    <div class="card">
        <h2>Sobre Mim</h2>
        <textarea name="bio" rows="4" placeholder="Escreva algo sobre voc√™...">{{ user.bio }}</textarea>
    </div>

    <div class="card">
        <h2>Avatar</h2>
        <p>Cole a URL de uma imagem para usar como seu avatar.</p>
        <input type="text" name="avatar_url" placeholder="https://exemplo.com/sua-imagem.png" value="{{ user.avatar_url }}">
        {% if user.avatar_url %}
            <img src="{{ user.avatar_url }}" alt="Seu avatar" style="max-width: 100px; margin-top: 10px; border-radius: 50%;">
        {% endif %}
    </div>

    <div class="card">
        <h2>Banner de Fundo</h2>
        <p>Cole a URL de uma imagem para usar como banner do seu perfil.</p>
        <input type="text" name="banner_url" placeholder="https://exemplo.com/seu-banner.png" value="{{ user.banner_url }}">
        {% if user.banner_url %}
            <img src="{{ user.banner_url }}" alt="Seu banner" style="max-width: 100%; margin-top: 10px; border-radius: 8px;">
        {% endif %}
    </div>

    <div class="card">
        <h2>Cor Principal do Perfil</h2>
        <p>Escolha uma cor para personalizar alguns elementos do seu perfil.</p>
        <input type="color" name="profile_color" value="{{ user.profile_color }}">
    </div>

    <div class="card">
        <h2>Cor de Fundo do Perfil</h2>
        <p>Escolha uma cor para o fundo do seu perfil.</p>
        <input type="color" name="background_color" value="{{ user.background_color }}">
    </div>

<div class="card">
    <h2>Se√ß√µes Personalizadas</h2>
    <div id="sections-container">
        {% for section in user_sections %}
        <div class="section">
            <input type="text" name="section_title" placeholder="T√≠tulo da se√ß√£o" value="{{ section[0] }}">
            <textarea name="section_content" rows="3" placeholder="Conte√∫do da se√ß√£o">{{ section[1] }}</textarea>
            <button type="button" onclick="this.parentNode.remove()">Remover</button>
        </div>
        {% endfor %}
    </div>
    <button type="button" class="add-btn" onclick="addSection()">Adicionar Se√ß√£o</button>
</div>


    <div class="card">
        <h2>Coloque seus gostos!</h2>
        <div id="tags-container">
            {% for tag in user_tags %}
            <div class="tag">
                <input type="text" name="tags" value="{{ tag }}">
                <button type="button" onclick="this.parentNode.remove()">Remover</button>
            </div>
            {% endfor %}
        </div>
        <button type="button" class="add-btn" onclick="addTag()">Adicionar hashtag</button>
    </div>

    

    <div class="card">
        <h2>Links de Contato</h2>
        <p>Para adicionar um link coloque NomePlataforma|URL</p>
        <div id="links-container">
            {% for link in user_links %}
            <div class="link">
                <input type="text" name="links" value="{{ link[0] }}|{{ link[1] }}">
                <button type="button" onclick="this.parentNode.remove()">Remover</button>
            </div>
            {% endfor %}
        </div>
        <button type="button" class="add-btn" onclick="addLink()">Adicionar link</button>
    </div>

    <div class="card" style="text-align:center;">
        <button type="submit">üíæ Salvar Perfil</button>
    </div>

    

</form>

<script>
function addTag() {
    const container = document.getElementById("tags-container");
    const div = document.createElement("div");
    div.className = "tag";
    div.innerHTML = `<input type="text" name="tags" placeholder="#exemplo">
                     <button type="button" onclick="this.parentNode.remove()">Remover</button>`;
    container.appendChild(div);
}

function addLink() {
    const container = document.getElementById("links-container");
    const div = document.createElement("div");
    div.className = "link";
    div.innerHTML = `<input type="text" name="links" placeholder="Discord|https://discord.com/...">
                     <button type="button" onclick="this.parentNode.remove()">Remover</button>`;
    container.appendChild(div);
}

function addSection() {
    const container = document.getElementById("sections-container");
    const div = document.createElement("div");
    div.className = "section";
    div.innerHTML = `
        <input type="text" name="section_title" placeholder="T√≠tulo da se√ß√£o">
        <textarea name="section_content" rows="3" placeholder="Conte√∫do da se√ß√£o"></textarea>
        <button type="button" onclick="this.parentNode.remove()">Remover</button>
    `;
    container.appendChild(div);
}

</script>

<footer>
    <p>&copy; 2026 mingleoo.com. Todos os direitos reservados.</p>
    <p>Made with ‚ù§Ô∏è by PKXD <img src="{{ url_for('static', filename='images/brazil_flag.svg') }}" alt="Brazil Flag" style="width: 16px; height: auto; vertical-align: middle;"></p>
</footer>

</body>
</html>
